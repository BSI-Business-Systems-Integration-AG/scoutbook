% =========================================================================== %
% Introduction
% =========================================================================== %

\ifx\wholebook\relax\else
  \documentclass[a4paper,10pt,twoside]{book}
  \input{../common}
  \pagestyle{headings}
  \graphicspath{{figures/} {../figures/}}
  \begin{document}
  \sloppy
\fi


% =========================================================================== %
\chapter{Introduction}

% --------------------------------------------------------------------------- %
\section{What is Eclipse Scout?}

\fbox{
  \parbox{12cm}{
    Section waiting for contribution (max 2'000 words)
	
    The focus of the first section should be on benefits of Scout.
	History should point to the 10 years of existence of Scout and previous technology transitions.
	Outlook should focus on values such as stability, dedication to grow the community and moving with best available technolgies.
  }
}

\noindent Existing Documentation
\begin{itemize}
  \item concept wiki \url{http://wiki.eclipse.org/Scout/Overview}
\end{itemize}

\subsection{Benefits of Scout}

\noindent Existing Documentation
\begin{itemize}
  \item concept wiki \url{http://wiki.eclipse.org/Scout/Overview/Why_You_Should_Use_Scout}
\end{itemize}

Eclipse Scout is a mature and open framework for modern, 
service oriented business applications.

With its multi-frontend support, Scout applications may run as desktop 
applications, in the web or on a mobile using a single codebase.

Scout substantially boosts developer productivity and is simple to learn.

User friendly applications are straight forward to implement with Scout’s 
comprehensive set of user interface components.

Completely based on Java/Eclipse, Scout Applications are easy to integrate 
in most IT environments.

\subsection{A short History}
needs text

\subsection{Outlook}
needs text

\newpage

% --------------------------------------------------------------------------- %
\section{What should I read?} 
\seclabel{whatshouldiread}

The text below provides guidelines on what to read (or what to skip) depending on your existing background.

We first address the needs of junior Java developers that like to learn more about developing enterprise applications.
Then, we suggest a list of sections relevant for software wizards that already have a solid understanding of the Eclipse platform, Java enterprise technolgies, and real world applications.
Finally, the information needs of IT managers are considered.

% ........................................................................... %
\subsection{I know some Java}

The good news first.
This book is written for you! 
No prior knowledge of the Eclipse Platform\footnote{Eclipse Platform: \url{http://wiki.eclipse.org/Platform}} is needed. 
We do not even assume that you have a meaningful understanding of the Java Enterprise Edition 
(Java EE)\footnote{Java Enterprise Edition: \url{http://en.wikipedia.org/wiki/Java_Platform,_Enterprise_Edition}}.
Of course, having prior experience in client server programming with Java is helpful.
It also helps having used the Eclipse IDE for Java development before --- please do not mistake the IDE with the Eclipse 
platform\footnote{By reading through the book you will learn that there is much more to the Eclipse platform than just the IDE}.
However, prior knowledge of Java EE and the Eclipse platform is not required for this book.

The ``bad'' news is, that writing Scout applications requires a solid understanding of Java.
To properly benefit from this book, we assume that you have been developing software for a year or more.
And you should have masterd the Java Standard Edition 
(Java SE)\footnote{Java Standard Edition: \url{http://en.wikipedia.org/wiki/Java_SE}} to a significant extent. 
To be more explicit, you are expected to be comfortable with all material required for the Java Programmer Level I 
Exam\footnote{Level I Exam: \url{docs.oracle.com/javase/tutorial/extra/certification/javase-7-programmer1.html}}
and most of the material required for 
Level II\footnote{Level II Exam: \url{docs.oracle.com/javase/tutorial/extra/certification/javase-7-programmer2.html}}.

As the focus of this book is on writing Scout applications and not on learning Java, Java EE, or the Eclipse platform, the necessary background material has been moved into corresponding appendices.
To get a more precise picture which parts of Java and Eclipse are important to Scout applications, consult the appendices listed below.

\begin{itemize}
  \item \appref{java_basics} highlighs relevant advanced Java SE concepts and necessary Java EE topics. 
        In addition, the appendix contains recommendations for introductory material as well as pointers to further reading regarding Java EE technology.
  \item \appref{eclipse_basics} provides a brief introduction for Eclipse concepts used in Scout. 
        This includes the OSGi/Equinox foundation as well as additional elements such as Eclipse plugins, feature and product files.
\end{itemize}

We now propose to start downloading and installing Scout as described in \appref{install_scout} and do some actual coding.
To do so, please continue with the ``Hello World'' example provided in \charef{helloworld}.
You can expect to complete this example in less than two hours including the necessary download and installation steps.
Afterwards, you might want to continue with the remaining material in ``Getting Started''. 
Working through the complete ``Getting Started'' should take no more than two days. 
This exercise will provide you with a broad overview of Eclipse Scout and enough hands-on material to decide how much Scout will help you with your current and future projects.

How you continue after ``Getting Started'' will depend on your current interests or your specific project. 
``The Frontend'' and ``The Backend'' walk you through the Scout application model covering the client, the server, and the necessary communication in the context of a typical business application.
``Developing Applications'' contains additional Scout features, relevant aspects for integrating Scout applications in an enterprise envrionment, and typical topics important to professional software development.

Once you work with the Scout framework on a regular basis, you might want to ask questions in the Scout 
forum\footnote{Eclipse Scout forum: \url{http://www.eclipse.org/forums/eclipse.scout}}.
When your question gets answered, please ask yourself if your initial problem could have been solved by better documentation.
In that case, you might want to help the Scout community by fixing or amending the Scout wiki pages\footnote{Eclipse Scout wiki: \url{http://wiki.eclipse.org/Scout}}.
Or this book. 
If you find a bug in Eclipse Scout that makes your life miserable you can report it. 
When your bug is fixed, you can test the fix.
To help speed up the bugfixing process you can contribute patches.
All of these actions will add to the healthy grow of the Scout community.
And this is exactly the topic of ``Contributing'', the last part of this book.

% ........................................................................... %
\subsection{I know tons of both Java and Eclipse}

This means that you are one of these software wizards that get easily bored.
You probably hate going through lengthy descriptions of widely known concepts.
In that case let us assume that you are prepared to spend two hours to grasp the scope of Eclipse Scout and get an impression of its strengths and limitations.

In that case you will not need to actually download, install, and code. 
Rather, it will suffice to flip through a couple of diagrams and screenshots, read about some central Scout concepts, and look at some code snippets provided in this book.
The list below suggests a sequence of sections to digest including a brief motivation for each one.

\begin{itemize}
  \item \prtref{getting_started} ``Getting Started'' 
      Provides you with the big picture. Skip the larger example in \charef{large_example}
  \item \charef{client_overview} ``Overview'' and \charef{client_modeling} ``Client Modeling''
      Get familiar with the Scout frontend architecture and client modeling makes Scout applications independent of any particular user interface technology
  \item \charef{fields} ``Form Fields'' and \charef{custom_fields} ``Custom Fields''
      Browse through the screensthos in \charef{fields} to get an impression over the form fields that are available out of the box. 
	  Look at the diagrams in \charef{custom_fields} to get an idea of how to extend the Scout framework with missing field types.
  \charef{server_overview} ``Overview'', \charef{services} Scout server
  % \item read overview and transaction management in backend
  % \item read application extensions to learn how scout applications can be properly modularized 
  % \item maybe check how to use your favorite logging framework with scout
  % \item glance at web and mobile application to learn how scout can use a single codebase to run an application on the desktop in the web, and on mobile devices
  % \item glance over the shocase sections in "integrating 3rd party" to see how scout applications integrate with other frameworks
  % \item flip though testing/profiling to convince yourself that developing scout applications is not different from developing other java/eclise applications	
\end{itemize}

% \begin{itemize}
  % \item read ''getting started'' but skip the larger example
  % \item read overview and client modeling in frontend 
  % \item flip though the form fields provided out of the box
  % \item maybe check custom fields to see how to add missing form fields
  % \item read overview and transaction management in backend
  % \item read application extensions to learn how scout applications can be properly modularized 
  % \item maybe check how to use your favorite logging framework with scout
  % \item glance at web and mobile application to learn how scout can use a single codebase to run an application on the desktop in the web, and on mobile devices
  % \item glance over the shocase sections in "integrating 3rd party" to see how scout applications integrate with other frameworks
  % \item flip though testing/profiling to convince yourself that developing scout applications is not different from developing other java/eclise applications	
% \end{itemize}

% ........................................................................... %
\subsection{I am a manager}

Beeing a manager and actually reading this book may indicate one of the following situations:

\begin{itemize}
  \item Your developer tried to convince you that Eclipse Scout can help you with implementing business applications in a shorter time and for less money.
        And you did not understand why (again) a new technology should work better than the ones you already use. 
	
\end{itemize}

% =========================================================================== %
\chapter{''Hello World''}
\chalabel{helloworld}

The ''Hello World'' chapter walks you through the creation of an Eclipse Scout ''Hello World'' client server application.
Except for a single line of code, we will be using the tooling provided by the Scout SDK.

The goal of this chapter is to provide a first impression of working with the Scout framework using the Scout SDK.
For this, we will start with building the application from scratch and end deploying the complete application to a Tomcat webserver.

\fbox{
  \parbox{12cm}{
\noindent Existing Documentation
\begin{itemize}
  \item wiki tutorial \url{http://wiki.eclipse.org/Scout/Tutorial/3.8/HelloWorld}
\end{itemize}
  }
}
% --------------------------------------------------------------------------- %
\section{Installation and Setup}

Before you can start with the Scout ''Hello World'' example you need to have a complete and working installation.
For this, follow the step-by-step installation guide provided in \appref{install_scout}.
After successful completion of the installation, you are ready to create your first Scout project.

% --------------------------------------------------------------------------- %
\section{Creating a new Project}
\seclabel{create_project_simple}

Start your Eclipse IDE and select an empty directory for your 
workspace\footnote{The term \textit{workspace} is used for a directory containing the relevant project artefacts such as the Java souce files or configuration files.} 
as described in \secref{download_install}.
To create a new Scout project, either select the \contextmenu{New Scout Project...} as shown in \figref{sdk_create_new_scout_project} or use the Eclipse \menu{File|New|Project...}.
In the latter case you are shown the generic \wizard{New Project} of Eclipse.
On the first dialog step, select the \wizard{Scout Project} below the Scout folder according to \figref{sdk_new_project_wizard}.
With the \button{Next} you will be directed to the next dialog step, the \wizard{New Scout Project}.

\begin{figure}
\includegraphics[width=13cm]{sdk_create_new_scout_project.png}
\caption{Create a new Scout project}
\figlabel{sdk_create_new_scout_project}
\end{figure}

In the \wizard{New Scout Project} you first enter a name for you Scout project. 
As we are creating a ''Hello World'' application use \texttt{org.eclipse.scout.helloworld} for the \field{Project Name}.
As shown on the right hand side of \figref{sdk_new_project_wizard}, the wizard will automatically use the part after the last period of the project name as the application alias. 
(TODO: explain what the project alias is used for. E.g. in development server servlet is usually mapped to http://localhost:8080/''alias''/). 
Now, click the \button{Finish} to let the Scout SDK create the initial project code for you.

\begin{figure}
\includegraphics[width=7cm]{sdk_new_project_1.png} \hspace{5mm}
\includegraphics[width=7cm]{sdk_new_project_2.png}
\caption{The new project wizard. The dialog on the left side is only shown when using the generic \wizard{New Project} of Eclipse}
\figlabel{sdk_new_project_wizard}
\end{figure}

\begin{figure}
\includegraphics[width=13cm]{sdk_initial_helloworld_project.png}
\caption{The Scout SDK showing the tree representation of the ''hello world'' application in the Scout Explorer.
In the Scout Object Properties displays the product launchers for the server and the available clients.}
\figlabel{sdk_initial_helloworld_project}
\end{figure}

After having built the initial project code, the Scout SDK displays the application model in the \textit{Scout Explorer}.
This model is visually presented as a tree structure covering both the client and the server part of the application.
In \figref{sdk_initial_helloworld_project} the Scout Explorer displays the top level elements of the complete Scout application.
Selecting the application's root node \texttt{org.eclipse.scout.helloworld} in the Scout Explorer displays the product launchers in the \textit{Scout Object Properties}.
As we can see in \figref{sdk_initial_helloworld_project}, we have shortcut icons to launch and stop four different development 
products\footnote{Product files define all necessary elements constituting an application.}.

\begin{itemize}
  \item \textbf{Server}: the server application
  \item \textbf{Swing}: the Swing client application
  \item \textbf{SWT}: the SWT client application
  \item \textbf{RAP}: the RAP server application
\end{itemize}

The server box provides links to the Eclipse product file \texttt{helloworld-server-dev.product}, the server configuration file \texttt{config.ini} as well as three icons to launch and stop the Scout server in the Scout SDK.
The same layout is used for controlling the other three products.
Both the Swing and the
SWT\footnote{Standard Widget Toolkit (SWT): \url{http://en.wikipedia.org/wiki/Standard_Widget_Toolkit}.} 
boxes represent rich clients\footnote{Rich client: \url{http://en.wikipedia.org/wiki/Fat_client}} 
that run on the desktop.
The RAP server application is used to enable Scout application to run in a browser, a tablet, or a mobile device.
RAP\footnote{Remote Application Platform (RAP): \url{http://www.eclipse.org/rap/}} in itself is a framework that allows to use Java for server-side 
Ajax\footnote{Asynchronous JavaScript and XML (AJAX): \url{http://en.wikipedia.org/wiki/Ajax_\%28programming\%29}}.

\fbox{
  \parbox{12cm}{
\noindent Existing Documentation
\begin{itemize}
  \item how-to wiki \url{http://wiki.eclipse.org/Scout/HowTo/3.8/Create_a_new_project}
\end{itemize}
  }
}

% --------------------------------------------------------------------------- %
\section{Run the Initial Application}

First, start the Scout server using the product launcher icons provided in the server box of the Scout Object Properties associated with the root node of the application.
For this, either click on the icon with the white triangle in the green circle of the right hand side of the box, or, click on the green bug icon right below to start the server in debug mode.

Once the server is running, you may start the Swing client, the SWT client, and the RAP server in the same way.
To dispay the Scout client in a web browser, type the address \texttt{http://localhost:8082/web} into the browser's navigation bar.
You should then see the three different clients with an empty desktop on each as shown in \figref{helloworld_empty}.

\begin{figure}
\includegraphics[width=4.5cm]{hellworld_empty_swing.png} \hspace{3mm}
\includegraphics[width=4.5cm]{hellworld_empty_swt.png} \hspace{3mm}
\includegraphics[width=4.5cm]{hellworld_empty_rap.png}
\caption{Running the three empty client applications from the Scout SDK. From left to right: The Swing client, the SWT client, and the webclient}
\figlabel{helloworld_empty}
\end{figure}

% --------------------------------------------------------------------------- %
\section{The User Interface Part}

In this section we add a simple text field to the empty desktop of the ''Hello World'' application.
Before we are going to add some content to the empty desktop we will introduce some central elements of the Scout application model that are involved in the user interface (UI) part of the ''Hello World'' application.

\begin{itemize}
  \item Desktop
  \item Form
  \item Form handler
  \item Process service
  \item Form data
  \item Form field
\end{itemize}
  
Each element is represented by a Java class in Scout.
This allows us to explain the basic concept using the source code in our ''Hello World'' application.
Please note, that all this Java code has been added in the project creation step by the Scout SDK described in \secref{create_project_simple}.
Obviously, this implies that you are free to adapt/change this code according to your needs.

\subsection{Desktop}

The desktop inherits from Scout class \java{AbstractDesktop} that represents the central container of all visible elements of the Scout client application.
The desktop in itself is the empty application frame with attached elements, such as menues or outlines\footnote{
In Scout, the term \textit{outline} is used for the concept of perspectives in the Eclipse IDE.
}.
To find the desktop class in the Scout Explorer, we first navigate to the orange \node{client} and double click the \node{Desktop} just below.
This will open the associated Java file \texttt{Desktop.java} in the editor view of the Scout SDK.
Of interest is the overwritten callback method \java{execOpend} shown in \lstref{helloworld.execopend}.

Method \java{execOpend} is called by the Scout framework after the desktop frame of the client application is created and becomes visible on the display.
The only thing that happens here is the creation of a \java{desktopForm} object, that gets assigned an icon before it is started via method \java{startView}.
For more complex applications having various parts in its UI, method \java{execOpend} will also need to deal with many more things.

\lstinputlisting[
  label=\lstlabel{helloworld.execopend},
  caption=Creating and starting a form in the client's Desktop callback method \java{execOpened}.,
  index={DesktopForm},
  linerange={42-47},
  float
]
{../code/helloworld/org.eclipse.scout.helloworld.client/src/org/eclipse/scout/helloworld/client/ui/desktop/Desktop.java}


\subsection{Form}

A Scout form always inherits from Scout class \java{AbstractForm}.
Scout forms are UI containers that can either be displayed as a dialog in its own window or shown as a view inside of another UI container.
In the ''Hello World'' application a form of class \java{DesktopForm} is created and displayed inside of the applications Desktop.
To find the desktop form class in the Scout Explorer, expand the orange \node{client}\footnote{
To expand elements (nodes, folders, etc.) in the Scout Explorer, use a double click on the element or a single click on the plus icon in front of the element.}.
Below this node, you will find the \folder{Forms}. 
Expanding this folder will show the \element{DesktopForm} as shown in \figref{helloworld_viewhandler}.

\begin{figure}
\includegraphics[width=15cm]{sdk_helloworld_viewhandler.png}
\caption{Scout SDK showing the DesktopForm's \textit{ViewHandler}.}
\figlabel{helloworld_viewhandler}
\end{figure}

Expanding \element{DesktopForm} in the Scout Explorer reveals its children \element{Variables}, \element{MainBox}, and \element{Handlers}.
In subfolder \element{Variables} we can add any non-visible variables to a form.
We do not need this for the ''Hello World'' application but the feature comes in very handy at times.
In subfolder \element{MainBox} all visible UI elements of the form are shown.
Currently, the main box of our \java{DesktopForm} is empty. 
But we will change this as soon as we are starting to add form fields.
Finally, subfolder \element{Handlers} contains all available form handlers. 
As shown in \figref{helloworld_viewhandler} we already have a view handler available for our desktop form.
But this is the topic of the following section.

\subsection{Form Handler}

Form handlers inherit from the Scout class \java{AbstractFormHandler} and are used to specify custom behaviour before a form is opend, or after it is closed.
The implementation of these handlers define how and from where the relevant data is loaded into the form before it is presented to the user.
After a user has entered or changed data in a from, the form handler implementation defines what happens to the changed data after the form is closed by the user.
To implement the desired custom behaviour, we only need to overwrite one of the callback methods defined in \java{AbstractFormHandler}.
The necessary wiring is provided by the framework. 

\lstinputlisting[
  label=\lstlabel{helloworld.viewhandler},
  caption=Parts of class \java{DesktopForm} with its view handler and method \java{startView}.,
  index={ViewHandler},
  emph={load},
  linerange={20-21,74-91},
  float
]
{../code/helloworld/org.eclipse.scout.helloworld.client/src/org/eclipse/scout/helloworld/client/ui/forms/DesktopForm.java}

For the ''Hello World'' example application, the desktop form will only display a text string obtained from the server.
For this, the available view handler is sufficient and the callback method to override is named \java{execLoad}.
To open the Java editor for the \java{ViewHandler}, double click on the \element{ViewHandler} in the Scout Explorer.
Your Scout SDK should then be in a state similar to \figref{helloworld_viewhandler}.
In the lower part of code snipped provided in \lstref{helloworld.viewhandler} we can see the wiring between the desktop form and the view handler in method \java{startView}.
Further up, we find the overwritten method \java{execLoad} of the view handler class.

Before we discuss the method's implementation, let us briefly investigate when \java{execLoad} is actually called.
As we have seen in the \java{Desktop} class in \lstref{helloworld.execopend}, the form's method \java{startView} is executed after creating the desktop form.
Inside this method, the desktop form is started/opened using \java{startInternal}.
In method \java{startInternal} a view handler is created and passed as a parameter.
This eventually leads to the call of our \java{execLoad} custom implementation.

We are now ready to dive into the implementation of method \java{execLoad} of the desktop form's view handler.
First, a reference to a process service named \java{IDesktopProcessService} is obtained using \java{SERVICES.getService}.
Then, a form data object is created.
All current form field values are then exported into the form data via method \java{exportFormData}.
Next, using the \java{load} service method highlighted in \lstref{helloworld.viewhandler}, new form field values are obtained.
Finally, these new values are then imported into the form via the \java{importFormData} method.

If the above description of method \java{execLoad} is not clear to you please continue with the next section.
There we will introduce process services and form data objects.

\subsection{Process Services and Form Data Objects}

For the time being it is sufficent to know that this (Scout)service is associated with the desktop form and responsible for fetching data from the 
service.
When we are looking at the server part of our ''Hello World'' application, we will talk more about this desktop process service.

Then, a form data is created and passed as a parameter to the \java{load} service method.
Just before the call of the load method, some exporting and importing is going on.

As we will see in the next section, this service is not located in the client, but on the server side.
For now, it is enough to know that we can get a reference to this service to the convenience method \java{SERVICES.getService}.

Form data objects inherit from \java{AbstractFormData} and are specialized data transfer objects\footnote{
Data Transfer Object (DTO): \url{http://en.wikipedia.org/wiki/Data_transfer_object}.
}
for the transfer of form field values between a Scout client application and a Scout server application.



\begin{figure}
\includegraphics[width=15cm]{sdk_helloworld_messagefield.png}
\caption{Scout SDK showing the \it{MessageField}}
\figlabel{helloworld_messagefield}
\end{figure}


% --------------------------------------------------------------------------- %
\section{The Server Part}
needs text

here comes a listing

\lstinputlisting[
  label=lst:helloworld.load,
  caption=Assigning "hello world" to the form data's message field.,
  index={DesktopFormData,DesktopProcessService},
  emph={getMessage,setValue},
  linerange={10-14},
  float
]
{../code/helloworld/org.eclipse.scout.helloworld.server/src/org/eclipse/scout/helloworld/server/services/process/DesktopProcessService.java}

% --------------------------------------------------------------------------- %
\section{Running the Application}
needs text

\noindent Existing Documentation
\begin{itemize}
  \item wiki tutorial \url{http://wiki.eclipse.org/Scout/Tutorial/3.8/HelloWorld#Run_the_.22hello_world.22_application}
\end{itemize}

% --------------------------------------------------------------------------- %

\ifx\wholebook\relax\else
   \input{../bibliography}
   \end{document}
\fi

% =========================================================================== %
