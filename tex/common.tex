%=============================================================================%
% Common things, settings, packages to include
%=============================================================================%

\usepackage{graphicx}
\usepackage{color}
\usepackage{makeidx}
\usepackage{ifpdf}
\usepackage{verbatim}
\usepackage[iso,american]{isodate}

\ifpdf
  \usepackage{pdfpages}
\fi

% --------------------------------------------------------------------------- %
% Setting up stuff depeding on output format
% --------------------------------------------------------------------------- %

\ifpdf
  % special settings for pdf mode
  \usepackage[colorlinks]{hyperref}
  \usepackage{courier}
  
  \hypersetup{
    colorlinks,
    linkcolor=darkblue,
    citecolor=darkblue,
    pdftitle={The Eclipse Scout Book},
    pdfauthor={The Scout Community},
    pdfkeywords={Enterprise Framework, Eclipse, Java, Client-Side, Rich Client, Web Client, Mobile},
    pdfsubject={Computer Science}
  }
  
  \usepackage{caption}
  \captionsetup{margin=10pt,font=small,labelfont=bf}
\else
  % special stuff for html mode
  \usepackage[tex4ht]{hyperref}
\fi

% --------------------------------------------------------------------------- %
% Setting up printing range
% --------------------------------------------------------------------------- %

\parindent 1cm
\parskip 0.2cm
\topmargin 0.2cm
\oddsidemargin 1cm
\evensidemargin 0.5cm
\textwidth 15cm
\textheight 21cm

% --------------------------------------------------------------------------- %
% Setting up paragraph formatting
% --------------------------------------------------------------------------- %

\setlength{\parindent}{20pt} 

% --------------------------------------------------------------------------- %
% Setting up listings
% --------------------------------------------------------------------------- %

%\usepackage[T1]{fontenc}
\usepackage{listings}
 
\definecolor{darkviolet}{rgb}{0.5,0,0.4}
\definecolor{darkgreen}{rgb}{0,0.4,0.2} 
\definecolor{darkblue}{rgb}{0.1,0.1,0.9}
\definecolor{darkgrey}{rgb}{0.5,0.5,0.5}
\definecolor{lightblue}{rgb}{0.4,0.4,1}
\definecolor{lightgray}{rgb}{0.97,0.97,0.97}

\renewcommand{\lstlistlistingname}{List of Listings}

% --------------------------------------------------------------------------- %
% listings package works well for pdf, but not for html
% therefore, use normal settings for pdf and a hack for html
% --------------------------------------------------------------------------- %
% listings pdf settings
\ifpdf

\lstset{
  basicstyle=\small\ttfamily,
  columns=fullflexible,
  breaklines=true,
  breakindent=10pt,
  prebreak=\mbox{{\color{blue}\tiny$\searrow$}},
  postbreak=\mbox{{\color{blue}\tiny$\rightarrow$}},
  showstringspaces=false,
  backgroundcolor=\color{lightgray}
}

% double quotes for listings: http://tex.stackexchange.com/questions/166790/how-can-i-get-straight-double-quotes-in-listings
%\lstset{  upquote=true}
\lstset{basicstyle=\ttfamily} % <<< This line added

% settings for xml files
\lstdefinelanguage{xml}
{
  commentstyle=\color{darkgrey}\upshape,
  morestring=[b]",
  morestring=[s]{>}{<},
  morecomment=[s]{<?}{?>},
  stringstyle=\color{black},
  identifierstyle=\color{darkblue},
  keywordstyle=\color{cyan},
  morekeywords={xmlns,name,point,factory,class} % list your attributes here
}

% settings for ini files
\lstdefinelanguage{ini}
{
  morecomment=[f][\color{darkgrey}\upshape][0]\#, % # is comment iff it's the first char on the line
  stringstyle=\color{black}
}

% settings for console output
\lstdefinelanguage{console}
{
  morecomment=[l]{C:},
  commentstyle=\color{darkblue}
}

% default settings (for java files)
\lstset{
  language=Java,
  emphstyle=\color{red}\bfseries,
  keywordstyle=\color{darkviolet}\bfseries,
  commentstyle=\color{darkgreen},
  morecomment=[s][\color{lightblue}]{/**}{*/},
  stringstyle=\color{darkblue},
}

\else
% --------------------------------------------------------------------------- %
% listings html settings (hack)
% also see http://www.itisnotoverengineering.com/2013/06/syntax-highlighting-with-tex4ht.html

\lstset{
  emphstyle=\color{red}\bfseries,
}

\lstset{
  language=Java,
  basicstyle=\sffamily,
  identifierstyle=\sffamily\itshape,
  keywordstyle=\sffamily\bfseries,
  commentstyle=\rmfamily\itshape,
  emphstyle=\rmfamily\itshape,
  stringstyle=\rmfamily\bfseries,
  numberstyle=\scriptsize,
  morecomment=[s][\color{lightblue}]{/**}{*/},
  columns=fullflexible,
  breaklines=true,
  breakindent=10pt,
  prebreak=\mbox{{\color{blue}\tiny$\searrow$}},
  postbreak=\mbox{{\color{blue}\tiny$\rightarrow$}},
  showstringspaces=false,
  backgroundcolor=\color{lightgray}
}

% settings for xml files
\lstdefinelanguage{xml}
{
  stringstyle=\color{black},
  identifierstyle=\color{darkblue},
  keywordstyle=\color{cyan},
  commentstyle=\color{darkgrey}\upshape,
  morestring=[b]",
  morestring=[s]{>}{<},
  morecomment=[s]{<?}{?>},
  morekeywords={xmlns,name,point,factory,class}% list your attributes here
}

% settings for ini files
\lstdefinelanguage{ini}
{
  stringstyle=\color{black},
  morecomment=[f][\color{darkgrey}\upshape][0]\# % # is comment iff it's the first char on the line
}

% settings for console output
\lstdefinelanguage{console}
{
  commentstyle=\color{darkblue},
  morecomment=[l]{C:}
}

\fi
% --------------------------------------------------------------------------- %

% --------------------------------------------------------------------------- %
% eclipse stuff macros
% --------------------------------------------------------------------------- %
\newcommand{\menu}[1]{\textsc{#1} menu}
\newcommand{\key}[1]{$<$\textsc{#1}$>$}
\newcommand{\altkey}[1]{$<$\textsc{alt}$>$+$<$\textsc{#1}$>$}
\newcommand{\ctrlkey}[1]{$<$\textsc{ctrl}$>$+$<$\textsc{#1}$>$}
\newcommand{\ctrlshiftkey}[1]{$<$\textsc{ctrl}$>$+$<$\textsc{shift}$>$+$<$\textsc{#1}$>$}
\newcommand{\contextmenu}[1]{\textsc{#1} context menu}
\newcommand{\button}[1]{\textsc{#1} button}
\newcommand{\tab}[1]{\textsc{#1} tab}
\newcommand{\icon}[1]{\textsc{#1} icon}
\newcommand{\wizard}[1]{\textit{#1} wizard}
\newcommand{\field}[1]{\textit{#1} field}
\newcommand{\outline}[1]{\textit{#1} outline}
\newcommand{\checkbox}[1]{\textit{#1} checkbox}
\newcommand{\node}[1]{\textit{#1} node}
\newcommand{\folder}[1]{\textit{#1} folder}
\newcommand{\link}[1]{\textit{#1} link}
\newcommand{\element}[1]{\textit{#1}}
\newcommand{\property}[1]{\textit{#1} property}
\newcommand{\java}[1]{\texttt{#1}}
\newcommand{\filename}[1]{\path{#1}}

% --------------------------------------------------------------------------- %
% diagram macros
% --------------------------------------------------------------------------- %

\newcommand{\includediagram}[2]{
  \ifpdf
    \includegraphics[width=#1]{#2.pdf}
  \else
    \includegraphics[width=#1]{#2.png}
  \fi
}

% --------------------------------------------------------------------------- %
% cross reference macros
% --------------------------------------------------------------------------- %
\newcommand{\prtlabel}[1]{\label{prt:#1}}
\newcommand{\applabel}[1]{\label{apx:#1}}
\newcommand{\chalabel}[1]{\label{cha:#1}}
\newcommand{\seclabel}[1]{\label{sec:#1}}
\newcommand{\lstlabel}[1]{lst:#1}
\newcommand{\figlabel}[1]{\label{fig:#1}}
\newcommand{\tablabel}[1]{\label{tab:#1}}

\newcommand{\prtref}[1]{Part~\ref{prt:#1}}
\newcommand{\appref}[1]{Appendix~\ref{apx:#1}}
\newcommand{\charef}[1]{Chapter~\ref{cha:#1}}
\newcommand{\secref}[1]{Section~\ref{sec:#1}}
\newcommand{\lstref}[1]{Listing~\ref{lst:#1}}
\newcommand{\figref}[1]{Figure~\ref{fig:#1}}
\newcommand{\tabref}[1]{Table~\ref{tab:#1}}

\ifpdf
  \newcommand{\htmlanchor}[1]{}
\else
  \newcommand{\htmlanchor}[1]{\HCode{<a id="#1"></a>}}
\fi

\ifpdf
  \newcommand{\htmlit}{}
  \newcommand{\htmlitend}{}
\else
  \newcommand{\htmlit}{\HCode{<i>}}
  \newcommand{\htmlitend}{\HCode{</i>}}
\fi

%=============================================================================%
